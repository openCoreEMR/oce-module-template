#!/usr/bin/env php
<?php

/**
 * Module setup console application
 *
 * @package   OpenCoreEMR
 * @link      http://www.open-emr.org
 * @author    OpenCoreEMR <support@opencoreemr.com>
 * @copyright Copyright (c) 2025 OpenCoreEMR Inc
 * @license   GNU General Public License 3
 */

// Autoload dependencies
$autoloadPaths = [
    __DIR__ . '/../vendor/autoload.php',
    __DIR__ . '/../../../autoload.php', // If used as a dependency
];

$autoloadFound = false;
foreach ($autoloadPaths as $autoloadPath) {
    if (file_exists($autoloadPath)) {
        require_once $autoloadPath;
        $autoloadFound = true;
        break;
    }
}

if (!$autoloadFound) {
    fwrite(
        STDERR,
        'Error: Composer autoloader not found. Please run "composer install" first.' . PHP_EOL
    );
    exit(1);
}

use OpenCoreEMR\Modules\YourModuleName\Command\SetupCommand;
use Symfony\Component\Console\Application;

$application = new Application('OpenEMR Module Setup', '1.0.0');
$application->add(new SetupCommand());
$application->setDefaultCommand('module:setup', true);
$application->run();
